Проект содержит два приложения для работы с сетевым трафиком:

1. **gen-app** - клиент-серверное TCP/IPv4 приложение
2. **sniffer** - анализатор сетевого трафика в реальном времени

## Требования

- **ОС**: GNU/Linux x64 (Debian 11 или новее)
- **Компилятор**: GCC/Clang с поддержкой C++20
- **Зависимости**:
    - libpcap-dev (для sniffer)
    - cmake (3.20+)

## Сборка проекта

### Сборка из корня проекта

````bash
# Прямая сборка в корне проекта
cmake -B build -S .
cmake --build build
````

### Результат сборки

После успешной сборки в директории `build/bin/` будут созданы:

- `gen-app` - клиент-серверное приложение
- `sniffer` - анализатор сетевого трафика
- `gen_app_tests` - тесты для gen-app
- `sniffer_tests` - тесты для sniffer

## Приложение gen-app

Клиент-серверное TCP/IPv4 приложение с использованием epoll и неблокирующих сокетов.

### Режим сервера

Сервер ожидает подключения, читает данные, дожидается закрытия соединения и продолжает работу.

````bash
# Запуск сервера на localhost:12345
./gen-app --addr localhost:12345 --mode server
````

````bash
# Запуск сервера c опцией логирования
./gen-app --addr localhost:12345 --mode server --log
````

### Режим клиента

Клиент поддерживает заданное количество параллельных соединений к серверу без ограничения времени. Каждое соединение
выполняет подключение, передачу случайных данных и закрытие, после чего создается новое соединение.

```bash
# Запуск клиента с 512 параллельными соединениями
./gen-app --addr localhost:8000 --mode client --connections 512 --seed 1337
```

### Параметры командной строки

- `--addr <host:port>` - адрес сервера (обязательно)
- `--mode <server|client>` - режим работы (обязательно)
- `--connections <N>` - количество параллельных соединений (только для клиента)
- `--seed <S>` - зерно для генератора случайных чисел (только для клиента)
- `--log` - включить лог событий

### Завершение работы

Для завершения работы используйте **Ctrl-C** (SIGINT).

## Приложение sniffer

Анализатор сетевого трафика в реальном времени на основе библиотеки libpcap.

### Функциональность

- Захват TCP/IPv4 пакетов через libpcap
- Выделение 4-tuple (IP-адреса и TCP-порты источника и назначения)
- Расчет статистики для каждого потока:
    - Средний размер пакета на уровне Ethernet
    - Количество переданных байтов в полезной нагрузке TCP
    - Средняя скорость передачи данных
- Вывод ТОП-10 потоков по скорости передачи каждую секунду
- Многопоточная архитектура

### Параметры командной строки

- `--interface <interface>` - сетевой интерфейс для анализа (обязательно)
- `--log` - включить логирование в файлы
- `--help` или `-h` - показать справку

### Примеры использования

```bash
# Базовый анализ на loopback интерфейсе
sudo ./sniffer --interface lo
```

```bash
# Анализ с логированием (файлы создаются в logs/)
sudo ./sniffer --interface eth0 --log
```

```bash
# Анализ WiFi трафика
sudo ./sniffer --interface wlan0
```

### Завершение работы

Для завершения работы используйте **Ctrl-C** (SIGINT).

## Тестирование

### Запуск тестов

```bash
# Сборка с тестами (по умолчанию включены)
cmake -B build -S . -DBUILD_TESTS=ON
cmake --build build
```

```bash
# Запуск тестов
./build/bin/gen_app_tests
./build/bin/sniffer_tests
```

### Интеграционное тестирование

1. Запустите сервер в одном терминале:
   ```bash
   ./gen-app --addr localhost:12345 --mode server
   ```

2. Запустите sniffer в другом терминале:
   ```bash
   sudo ./sniffer --interface lo
   ```

3. Запустите клиент в третьем терминале:
   ```bash
   ./gen-app --addr localhost:12345 --mode client --connections 512 --seed 42
   ```

4. Наблюдайте за статистикой в sniffer
